import{m as l,C as s}from"./index.4a8d564d.js";window.Alpine=l;window.CTFd=s;l.data("ScoreboardDetail",()=>({data:null,colors:["#E7362B","#FF9900","#FBFF2F","#44BA53","#00E7AF","#2E81FF","#A32EFF","#DD01F0","#FF2FC5","#FFFFFF"],datasets:[],chart:null,getTextDate(r,o){let e=["Jan","Feb","Mar","Apr","May"],t=new Date(r[o].date);return o===0?e[t.getMonth()]+" "+t.getDate():new Date(r[o-1].date).getDate()===t.getDate()?"":e[t.getMonth()]+" "+t.getDate()},getDataChart(r){let o=[],e=[];for(let t=0;t<Object.values(r).length;t++)e=e.concat(Object.values(r)[t].solves);e=e.sort((t,a)=>{let i=new Date(t.date).getTime()/1e3,n=new Date(a.date).getTime()/1e3;return i-n});for(let t=0;t<e.length;t++)o.push(e[t].date);return{arr:o,listSolves:e}},getDataSet(r){let o=e=>{let t=[];for(let a=0;a<e.length;a++)a===0?t.push({x:e[a].date,y:e[a].value}):t.push({x:e[a].date,y:t[a-1].y+e[a].value});return t};return Object.values(r).map((e,t)=>{let a=e.solves.map(i=>"White");return{id:e.id,name:e.name,type:"line",hidden:!1,data:o(e.solves),borderColor:this.colors[t],borderWidth:3,labelColor:this.colors[t],pointRadius:4,pointHoverRadius:8,pointBackgroundColor:a,pointHoverBackgroundColor:a}})},showDataset(r,o){this.chart.data.datasets[o].hidden=!this.chart.data.datasets[o].hidden,this.chart.update()},convertDate(r){const o={day:"2-digit",month:"short",timeZone:"UTC"},e={hour:"2-digit",minute:"2-digit",timeZoneName:"short",timeZone:"UTC"},t=new Intl.DateTimeFormat("en-GB",o),a=new Intl.DateTimeFormat("en-GB",e),i=t.format(r),n=a.format(r).replace(",","");return`${i} ${n}`},async init(){this.data=await s.pages.scoreboard.getScoreboardDetail(10);let r=document.getElementById("scoreBoard").getContext("2d"),o=this.getDataChart(this.data).arr,e=this.getDataChart(this.data).listSolves;this.datasets=this.getDataSet(this.data);let t=new Chart(r,{data:{datasets:this.datasets,labels:o},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{title:a=>(console.log(a),this.convertDate(a.label))},backgroundColor:"#222631",bodyColor:"#FFF",displayColors:!1,titleFont:{weight:"bold"},bodyFont:{size:"18",weight:"700"},xPadding:10,yPadding:24}},scales:{x:{ticks:{callback:a=>this.getTextDate(e,a),color:"#7A7D83",font:{size:14}},grid:{display:!1},border:{color:"#666970"}},y:{ticks:{color:"#7A7D83",font:{size:14}},grid:{display:!1},border:{color:"#666970"}}}}});Object.seal(t),this.chart=t}}));l.data("ScoreboardList",()=>({standings:null,brackets:[],activeBracket:null,async init(){const o=await(await s.fetch(`/api/v1/brackets?type=${s.config.userMode}`,{method:"GET"})).json();this.brackets=o.data,this.full_standings=this.standings=await s.pages.scoreboard.getScoreboard()}}));l.start();
