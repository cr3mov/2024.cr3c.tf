import{m as d,c as h,C as i}from"./index.4a8d564d.js";import"./index.10f7be35.js";import"./echarts.788bbdb1.js";window.Alpine=d;d.data("UserGraphs",()=>({solves:null,fails:null,awards:null,solveCount:0,failCount:0,awardCount:0,chart:null,countTask:null,countSolved:null,allChallenges:null,getSolvePercentage(){return this.solveCount+this.failCount?(this.solveCount/(this.solveCount+this.failCount)*100).toFixed(2):0 .toFixed(2)},getFailPercentage(){return this.solveCount+this.failCount?(this.failCount/(this.solveCount+this.failCount)*100).toFixed(2):0 .toFixed(2)},getMockPercentage(){return this.solveCount+this.failCount?0 .toFixed(2):100 .toFixed(2)},getCategoryBreakdown(){if(!this.solves)return[];const o=this.solves.data.length,e=this.solves.data.reduce((t,r)=>(t[r.challenge.category]=(t[r.challenge.category]||0)+1,t),{}),a=[];for(const t in e)a.push({name:t,count:e[t],percent:(e[t]/o*100).toFixed(2),color:h(t)});return a||[]},getDataChart(o){let e=(t,r)=>{let n=["Jan","Feb","Mar","Apr"],s=new Date(t[r].date);return r===0?n[s.getMonth()]+" "+s.getDate():new Date(t[r-1].date).getDate()===s.getDate()?"":n[s.getMonth()]+" "+s.getDate()},a=[];for(let t=0;t<o.length;t++)a.push(e(o,t));return a},getScoreChart(o){let e=[];for(let a=0;a<o.length;a++)a===0?e.push(o[a].challenge.value):e.push(e[a-1]+o[a].challenge.value);return e},getGradient(o){const e=o.createLinearGradient(0,0,0,250);return e.addColorStop(.3,"#D46F6A"),e.addColorStop(1,"#171B26"),e},async init(){this.solves=await i.pages.users.userSolves(window.USER.id),this.fails=await i.pages.users.userFails(window.USER.id),this.awards=await i.pages.users.userAwards(window.USER.id),this.allChallenges=await i.pages.challenges.getChallenges(),this.countTask=this.allChallenges.length,this.countSolved=this.solves.data.length,this.solveCount=this.solves.meta.count,this.failCount=this.fails.meta.count,this.awardCount=this.awards.meta.count;let o=document.getElementById("scoreGraph").getContext("2d"),e=this.getDataChart(this.solves.data),a=this.getScoreChart(this.solves.data),t=this.solves.data.map(l=>"White");new Chart(o,{type:"line",data:{labels:e,datasets:[{fill:!0,label:"",data:a,backgroundColor:()=>this.getGradient(o),borderColor:"#E7362B",borderWidth:3,labelColor:"#fff",pointRadius:4,pointHoverRadius:8,pointBackgroundColor:t,pointHoverBackgroundColor:t}]},options:{animation:{duration:0},scales:{y:{ticks:{color:"#7A7D83",font:{size:14}},grid:{display:!1},border:{color:"#666970"}},x:{ticks:{color:"#7A7D83",font:{size:14}},grid:{display:!1},border:{color:"#666970"}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#222631",bodyColor:"#FFF",displayColors:!1,titleFont:{weight:"bold"},bodyFont:{size:"18",weight:"700"},xPadding:10,yPadding:24,callbacks:{label:l=>l.dataset.data[l.dataIndex]}}}}});const r=this.getCategoryBreakdown();let n=r.map(l=>l.count),s=r.map(l=>l.color),u=r.map(l=>l.name);new Chart(this.$refs.allTask,{type:"doughnut",data:{labels:u,datasets:[{data:n,backgroundColor:s,borderColor:s,borderRadius:5,spacing:15}]},options:{animation:{duration:0},plugins:{legend:{display:!1}},circumference:180,rotation:270,cutout:"90%"}})}}));d.start();
